<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><link rel=apple-touch-icon sizes=180x180 href=/images/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/images/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/images/favicon-16x16.png><link rel=manifest href=/images/site.webmanifest><title>Week 1 - Introduction to Databases</title><meta name=description content="2019 Humber Database Course"><meta name=author content="Simon Borer"><link rel=stylesheet href=https://www.dbcourse2019.com/sass/slides/main-slides.min.8d906c197688c31feb21f74c1957127d2d8db8fe27a3226d390f571c6e7d4e14.css><link rel=stylesheet href=/css/codemirror.css></head><body><div class=reveal><div class=slides><section class=slide-only><a href=https://www.dbcourse2019.com class=h1>dbcourse2019.com</a></section><section><h2 class=slide-only>Here's what we're going to do today:</h2><div class=grid-x><div class="cell large-10 large-offset-1"><ol class=toc><li><strong>Housekeeping</strong><ul><li><a href=#intro>Course introduction</a></li></ul></li><li><strong>The Big Picture</strong><ul><li><a href=#dbContents>What's a database?</a></li><li><a href=#clientServer>What does a database do?</a></li><li><a href=#access>What do we do with a database?</a></li></ul></li><li><strong>Getting ready</strong><ul><li><a href=#dev>A tool for using a database</a></li></ul></li><li><strong>History, terms & definitions</strong><ul><li><a href=#history>History</a></li><li class=post-only><a href=#terms>Terminology</a></li><li><a href=#org>Organization of a (relational) database</a></li><li><a href=#relationships>Types of relationships</a></li><li><a href=#def>Types of data (and other ways to define columns)</a></li><li><a href=#ddlDml>Types of commands</a></li><li class=post-only><a href=#query>What is a query?</a></li></ul></li><li><strong>Getting our hands dirty</strong><ul><li><a href=#formatting>How to format your code</a></li><li><a href=#lab>Lab time!</a></li></ul></li></ol></div></div></section><section class=slide-only><h2 class=h2>Housekeeping</h2></section><section id=intro><div class=grid-x><div class="cell large-10 large-offset-1 post-section"><h2 class=h2>Welcome!</h2><p>My name is Simon Borer. You can reach me at <a href=mailto:brrs0390@humbermail.ca>brrs0390@humbermail.ca</a>.</p><p class=slide-only>I like coffee <span role=img aria-label=coffee>â˜•</span>, old-timey baseball <span role=img aria-label=baseball>âš¾</span>, horror movies <span role=img aria-label=ghost>ðŸ‘»</span> and accessible websites <span role=img aria-label=computer>ðŸ’»</span>.</p></div></div></section><section><div class=grid-x><div class="cell large-10 large-offset-1"><p>In this course, we'll learn...</p><ul><li>what a database is,</li><li>different tools for interacting with a database,</li><li>different techniques for interacting with a database, and</li><li>how to design and optimize a database.</li></ul></div></div></section><section><div class=grid-x><div class="cell large-10 large-offset-1"><h2 class=h2>Anybody can do just fine in this course.</h2><p>Come to class every week.</p><p>Do your assignments on time.</p><p>Ask questions.</p><p>Don't cheat.</p></div></div></section><section><div class=grid-x><div class="cell large-10 large-offset-1"><h2 class=h2>Books</h2><div class="callout warning"><em>We're investigating how to provide you with an Oracle Server. You might want to hold off on buying the Oracle textbook until the midterm.</em></div><br><ul><li>Murachâ€™s MySQL, 2nd Edition<ul><li>ISBN <code>978-1-890774-82-0</code></li></ul></li><li>Murachâ€™s Oracle SQL and PL/SQL, 2nd Edition<ul><li>ISBN <code>978-1-890774-80-6</code></li></ul></li></ul></div></div></section><section><div class=grid-x><div class="cell large-10 large-offset-1"><h2 class=h2>Rubric</h2><div class=table-scroll><table class=unstriped><thead><tr><td>Evaluation</td><td>Format</td><td>Due</td><td>Percentage</td></tr></thead><tbody><tr><td>Mid term</td><td>Paper</td><td>Week 7</td><td>30</td></tr><tr><td>Final exam</td><td>Paper</td><td>Week 15</td><td>30</td></tr><tr><td>Quizzes, Assignments, Labs</td><td>Paper and digital</td><td>Weekly</td><td>40</td></tr></tbody><tfoot><tr><td colspan=3 class=text-center>Total</td><td>100</td></tr></tfoot></table></div></div></div></section><section class=slide-only><div class=grid-x><div class="cell large-10 large-offset-1"><h2 class=h2>Seriously, don't cheat.</h2><p>Repercussions will be severe.</p><p>Also, it will be really awkward for me.</p><p>If you are feeling overwhelmed, talk to me. We can arrange peer tutoring, extensions, etc.</p><p>If you are copying code from a resource (i.e. textbook, tutorial), write it out yourself and cite your source.</p><p>If you are copying code from another student, you will <em>both</em> get in trouble.</p></div></div></section><section><div class=grid-x><div class="cell large-10 large-offset-1"><h2 class=h2>Two aspects of my teaching philosophy.</h2><ol><li>I'm here for you to bug. Please ask me all your questions.</li><li>Muscle memory is key. It's going to bug you how often you have to type things you already know in your head, but you need to know it in your fingers.</li></ol></div></div></section><section><div class=grid-x><div class="cell large-10 large-offset-1"><h2 class=h2>The Syllabus</h2><p><a class=button target=_blank rel=noopener href=/files/syllabus-HTTP5105.pdf>Download the syllabus<span class=show-for-sr>Opens in a new window.</span></a></p></div></div></section><section class=slide-only><h2 class=h2>The Big Picture</h2></section><section id=dbContents><div class=grid-x><div class="cell large-10 large-offset-1"><h2 class=h2>What's a database?</h2><p>There are all different kinds of databases. The kind we'll mostly be working with in this course are called relational databases, because they're really good at connecting different kinds of data together.</p><figure><img src=/images/connecting-data.jpg alt="Data from Star Trek and another Data from Star Trek"><figcaption>There are going to be a lot of puns in this course. I am genuinely sorry.</figcaption></figure></div></div></section><section><div class=grid-x><div class="cell large-10 large-offset-1"><p>Relational databases are made up of <strong>tables</strong>. <span class=post-only>A table is not a spreadsheet, but that's a handy way to think of them.</span><br class=slide-only>Tables have <strong>rows</strong> (also known as records) for each instance of data, each entity. Think of a table called "Students". Each student would be entered into the table as a row.</p><p>Tables also have <strong>columns</strong>. Each column represents a different type of information. In a table called "Students", we might have columns for "first name", "last name", "email address", etc.</p></div></div></section><section><div class=grid-x><div class="cell large-10 large-offset-1"><p>If your database is well-designed, the columns will be broken down into narrow categories, as it is easier to tell a computer how to put things together (i.e. "Patrick" + " " + "Stewart") than it is to tell a computer how to split things apart (i.e. trying to explain to a computer how to find the last name of "Sir Patrick James Stewart III, Ph.D").</p></div></div></section><section><div class=grid-x><div class="cell large-10 large-offset-1"><p>A relational database holds different tables of data that are related to one another, but have different subjects. For instance, "Students", "Classes", "Teachers", and "Classrooms" are all different entities, but can be related to one another to answer questions.<pre><code>"Who will be in Building A at 10:45?"</code></pre>That is a question we can answer if our "Students" and "Teachers" tables tell us what classes those people are in, our "Classes" table tells us what classrooms the classes are in, and the "Classrooms" table tells us what building the rooms are in.</p></div></div></section><section><div class=grid-x><div class="cell large-10 large-offset-1"><p>We answer that question by using a language called <abbr title="Structured Query Language">SQL</abbr> to get related data from different tables.</p><p>SQL is a (relatively) old, and very reliable language, and integrates easily with many other languages that you'll learn in this program (javaScript, PHP, .NET, etc.). It's such a nicely designed language that those languages haven't tried to replace SQL, because it's easier just to write SQL in your PHP.</p></div></div></section><section id=clientServer><div class=grid-x><div class="cell large-10 large-offset-1"><h2 class=h2>What a database does</h2><p>Let's look at where a database sits in relation to other technologies in order to make the internet a thing.</p><h3 class=post-only>Components of a client-server system</h3><a href=/images/server-diagram.png target=_blank><img class=diagram src=/images/diagram.png alt="A diagram of a web client making a request from a web server, which in turn either returns static files, or a dynamic request populated by data from a database.">
<span class=show-for-sr>Open image in a new window</span></a></div></div></section><section id=access><div class=grid-x><div class="cell large-10 large-offset-1"><h2 class=h2>What do we do with a database?</h2><p>Most databases are accessed using the Structured Query Language (SQL). SQL can either be written into server-side code (like <abbr title="The rare recursive acronym: 'PHP: Hypertext Preprocessor'">PHP</abbr> or <abbr title="Active Server Pages">ASP</abbr>) or run through a <abbr title="Graphical User Interface">GUI</abbr> like phpMyAdmin or DBeaver.</p></div></div></section><section><div class=grid-x><div class="cell large-10 large-offset-1"><a href=/images/diagram-server_db.png target=_blank><img class="diagram image-3q" src=/images/diagram-server-db.png alt="A diagram of a web client making a request from a web server, which in turn either returns static files, or a dynamic request populated by data from a database.">
<span class=show-for-sr>Open image in a new window</span></a></div></div></section><section><div class=grid-x><div class="cell large-10 large-offset-1"><h2 class=h2>Time to code! ...almost</h2><p>Ok, now we know what a database is, what it does, and what we can do with it. Let's get our hands dirty! We're going to install a server stack (MAMP) on our machines that will allow us to use SQL to get information from a database running on MAMP.</p><p>This next part is my least favourite (getting stuff running on everybody's machines - some of y'all have weird set-ups, I'm not gonna lie), but the part after that, the writing code part, that's the <em>best</em>.</p></div></div></section><section class=slide-only><h2 class=h2>Getting Ready</h2></section><section id=dev><div class=grid-x><div class="cell large-10 large-offset-1"><h2 class=h2>MAMP</h2><p>MAMP stands for MacOS+Apache+MySQL+PHP. Don't worry if you're on Windows, it works on Windows, too. MAMP is a program that creates a virtual Apache server on your computer, along with a MySQL database and PHP. This allows us to develop websites and services using this technology stack on our own computers without having to push our code to another server.</p></div></div></section><section><div class=grid-x><div class="cell large-10 large-offset-1"><h3 class=h3>Instructions for installing MAMP</h3><figure><a href=https://www.mamp.info/en/downloads/ target=_blank rel=noopener><img src=/images/download-mamp.png alt="Screenshot of download page for both Mac & Windows versions of MAMP"><figcaption>Download MAMP</figcaption></a></figure></div></div></section><section><div class=grid-x><div class="cell large-10 large-offset-1"><p>Now that you have MAMP installed and configured, let's start it up! Open the application, and click the "Start Servers" power button.</p><figure><img src=/images/MAMP-not_started.png alt="MAMP before starting the servers."></figure></div></div></section><section><div class=grid-x><div class="cell large-10 large-offset-1"><p>Now we've started our two servers - our database server running MySQL, and our Apache web server, which can process PHP and co-ordinate with the browser to serve web pages.</p><p><strong>Step 1:</strong> Go to the "web server" tab in MAMP. This tells you where your <code>htdocs</code> folder is located.</p></div></div></section><section><div class=grid-x><div class="cell large-10 large-offset-1"><p><strong>Step 2: </strong>Create a file called <code>index.php</code> in the <code>htdocs</code> folder.</p><p><strong>Step 3: </strong>Open your <code>index.php</code> file and paste in <em>all</em> of the following code:</p><textarea data-code-mirror=html data-code-mirror-height=460 rows=15 cols=120>
<!doctype html>
<html lang="">
  <head>
    <meta charset="utf-8">
    <title></title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
  </head>
  <body style="background:black;">
    <main style="text-align:center;font-family:sans-serif;color:white;">
        <h1>It's working!</h1>
        <img src="https://i.imgur.com/ASIS6cZ.jpg" alt="Nintendo Power Glove" style="max-height:50vh;">
    </main>
    </body>
</html></textarea></div></div></section><section><div class=grid-x><div class="cell large-10 large-offset-1"><p>Now go to <a href=localhost:8888 target=_blank rel=noopener>your local server</a> and refresh your browser.</p><p>If you navigate to <a href=http://localhost:8888/phpMyAdmin/>phpMyAdmin</a>, you'll see that we have a built-in tool for managing the database.</p><figure><img src=/images/phpmyadmin.png alt="The phpMyAdmin interface"><figcaption>Let's interface like it's 1999!</figcaption></figure></div></div></section><section><div class=grid-x><div class="cell large-10 large-offset-1"><h2 class=h2>Let's generate some data!</h2><p>Our friend Christine has created a <a href=http://sandbox.bittsdevelopment.com/humber/datagenerator/ target=_blank rel=noopener>data generator for us</a>. Download an <code>.sql</code> file from the data generator.</p><a href=http://sandbox.bittsdevelopment.com/humber/datagenerator/ target=_blank rel=noopener><figure><img src=/images/data-generator.png alt="Data generator"><br><figcaption>Data generator</figcaption></figure></a><p>Now we've got some data and a database server - but we still need a database!</p></div></div></section><section><div class=grid-x><div class="cell large-10 large-offset-1"><p>In phpMyAdmin, click on the "SQL" tab, paste in the code below, and click the "Go" button.</p><pre class=slide-only><code class=language-sql>CREATE DATABASE blog;</code></pre><textarea data-code-mirror=sql data-code-mirror-height=40 cols=50 class=post-only>CREATE DATABASE blog;</textarea><figure><a href=http://localhost:8888/phpMyAdmin/server_sql.php target=_blank rel=noopener><img src=/images/create-db.png alt="Creating a database in phpMyAdmin"><figcaption>It is a tiny button - they really oughta make it bigger.</figcaption></a></figure></div></div></section><section><div class=grid-x><div class="cell large-10 large-offset-1"><p>Congratulations! You've just run your first SQL command!</p><p>Let's take a moment to appreciate how easy this is to read:</p><p><pre class=slide-only><code class=language-sql>CREATE DATABASE blog;</code></pre><textarea data-code-mirror=sql data-code-mirror-height=40 cols=50 class=post-only>CREATE DATABASE blog;</textarea></p><p>The English translation of which is <em>"Hi compter! Please create a database called "blog"</em>.</p></div></div></section><section><div class=grid-x><div class="cell large-10 large-offset-1"><p>Now that we have a database, we can import the data that we generated earlier.</p><figure><img src=/images/import-authors.png alt="Importing the authors.sql file"><figcaption>The order here is important!</figcaption></figure></div></div></section><section><div class=grid-x><div class="cell large-10 large-offset-1"><ol><li>Click on the "blog" database in the left sidebar.</li><li>Select the "Import" tab.</li><li>Use the "Choose File" dialog to select your <code>authors.sql</code> file.</li><li>Click the "Go" button.</li></ol></div></div></section><section><div class=grid-x><div class="cell large-10 large-offset-1"><p>Now that we have actual data, SQL starts to get interesting. Go back to the "SQL" tab and run the following query:</p><pre class=slide-only><code class=language-sql>SELECT * FROM authors;</code></pre><textarea data-code-mirror=sql data-code-mirror-height=40 class=post-only>SELECT * FROM authors;</textarea><p>This translates to <em>"Select all columns of data in all the rows from the authors table"</em>.</p></div></div></section><section><div class=grid-x><div class="cell large-10 large-offset-1"><h2 class=h2>DBeaver</h2><p>It's good to be familiar with phpMyAdmin, as it's very common, and you'll want to know what you're doing when your buddy screws up their Wordpress site and you need to rescue their data.</p><p>It's nice to have a tool that's a little more... robust? So let's install a program named DBeaver. It's wonderful for managing MySQL, but it supports a huge range of other Database Management Systems, too!</p></div></div></section><section><div class=grid-x><div class="cell large-10 large-offset-1"><figure><a href=https://dbeaver.io/download/ target=_blank rel=noopener><img src=/images/download-dbeaver.png alt><figcaption>Download DBeaver</figcaption></a></figure><p>Once you've downloaded, installed and started DBeaver, it will ask you to select a driver for your first database connection - select the "All" tab and choose "MySQL" (<strong>not</strong> MySQL 8+ - MAMP runs on MySQL 5.7 as of this writing).</p></div></div></section><section><div class=grid-x><div class="cell large-10 large-offset-1"><figure><img src=/images/dbeaver-mysql.png alt="Selecting the MySQL driver in DBeaver"><figcaption>That's a lot of different kinds of Database management!</figcaption></figure><p>You may be prompted to download an additional driver - and you should!</p></div></div></section><section><div class=grid-x><div class="cell large-10 large-offset-1"><p>Finally, you can fill out the prompt to connect to our database. Fill out the following values:</p><table class=fixed><thead><tr><th>Port</th><th>User name</th><th>Password</th></tr></thead><tbody><tr><td>8889</td><td>root</td><td>root</td></tr></tbody></table></div></div></section><section><div class=grid-x><div class="cell large-10 large-offset-1"><figure><img src=/images/dbeaver-connect.png alt="DBeaver connection form"><figcaption>Aside from Port, User name and Password, leave everything else as-is.</figcaption></figure></div></div></section><section><div class=grid-x><div class="cell large-10 large-offset-1"><p>Finally, test your connection with - you guessed it - the "Test Connection ..." button, and, provided your connection works, click "Finish".</p></div></div></section><section><div class=grid-x><div class="cell large-10 large-offset-1"><figure><figcaption>Select the <code>blog</code> database on the left.</figcaption><img src=/images/dbeaver-select-db.png alt="Select the 'blog' database"></figure><figure><figcaption>Open the SQL editor from the DBeaver menu.</figcaption><img src=/images/dbeaver-sql-editor.png alt="Select the SQL editor"></figure><p></p></div></div></section><section><div class=grid-x><div class="cell large-10 large-offset-1"><p>Let's try a query, just like we did in phpMyAdmin, but we'll add a little spice to it:</p><pre class=slide-only><code class=language-sql>SELECT * FROM blog.authors
WHERE authoremail LIKE '%yahoo.c%'</code></pre><textarea data-code-mirror=sql data-code-mirror-height=70 class=post-only>SELECT * FROM blog.authors
WHERE authoremail LIKE '%yahoo.c%'</textarea></div></div></section><section><div class=grid-x><div class="cell large-10 large-offset-1"><p>Today we're working with the data that aligns with the textbook, which is pretty dry small business data. Not that exciting.</p><p>I'm going to try to incorporate data that's a little more compelling in the coming weeks to demonstrate just how powerful it can be to ask good questions, and get good answers.</p></div></div></section><section><div class=grid-x><div class="cell large-10 large-offset-1"><p>There is a wealth of publicly available, super-interesting data out there! Here's a few examples and resources for you to look at:</p><h3>Examples:</h3><ul><li><a href=http://data.torontopolice.on.ca/datasets/bicycle-thefts/data target=_blank rel=noopener>Bike theft in Toronto, 2014-2017 <span class=show-for-sr>Opens in a new tab</span></a></li><li><a href=https://github.com/fivethirtyeight/data/blob/master/tarantino/tarantino.csv target=_blank rel=noopener>Swearing in Tarantino Movies <span class=alert>(NSFW)</span> <span class=show-for-sr>Opens in a new tab</span></a></li><li><a href=https://github.com/fivethirtyeight/data/blob/master/hate-crimes/hate_crimes.csv target=_blank rel=noopener>Hate crimes and income inequality <span class=show-for-sr>Opens in a new tab</span></a></li><li><a href=https://www.ontario.ca/data/ontario-forest-biomonitoring-network target=_blank rel=noopener>Effects of climate change on Ontario forests <span class=show-for-sr>Opens in a new tab</span></a></li><li><a href=https://selectstarsql.com/data/tx_deathrow_full.csv target=_blank rel=noopener>Texas execution data <span class=show-for-sr>Opens in a new tab</span></a></li></ul><h3 class=post-only>Resources:</h3><ul class=post-only><li><a href=https://www.opendatasoft.com/a-comprehensive-list-of-all-open-data-portals-around-the-world/ target=_blank rel=noopener>A list of 2600+ Open Data portals around the world <span class=show-for-sr>Opens in a new tab</span></a></li><li><a href=https://github.com/fivethirtyeight/data/ target=_blank rel=noopener>Data sets from fivethirtyeight.com <span class=show-for-sr>Opens in a new tab</span></a></li><li><a href="https://cse.google.com/cse?q=+&cx=002720237717066476899:v2wv26idk7m" target=_blank rel=noopener>Google custom search <span class=show-for-sr>Opens in a new tab</span></a></li><li><a href=https://www.reddit.com/r/datasets/top/ target=_blank rel=noopener>Reddit/r/datasets <span class=show-for-sr>Opens in a new tab</span></a></li></ul><div class="callout success post-only"><strong>Note:</strong> Most database clients can pretty easily import most spreadsheet file formats, including <code>.csv</code>, <code>.xls</code>, etc. into a database.</div><div class="callout alert post-only"><strong>Note:</strong> Datasets vary wildly in size, from bytes to terabytes. Know before you download!</div></div></div></section><section><div class=grid-x><div class="cell large-10 large-offset-1"><hr class=post-only><p>For today, though, we're going to import some big fat databases based on the textbook.</p><ol><li>Download this <a href=/files/create_db.zip download>zip file</a> and unzip it.</li><li>In DBeaver, go to <code>File</code> > <code>Import</code> and select <code>Scripts</code>.</li><li>Click <code>next</code>, and for "Input directory", select the folder that you unzipped (create_db).</li><li>Under "Root scripts folder", select "Scripts", and click <code>Finish</code>.</li><li>Finally, from the DBeaver menu, select "SQL Editor", and, under the "Choose SQL Script" dialog, you should see <code>create_mysql_databases.sql</code>.</li></ol></div></div></section><section><div class=grid-x><div class="cell large-10 large-offset-1"><p>Select this <code>.sql</code> file, and then run it with the "Execute Script" button.</p><figure><figcaption>There are keyboard shortcuts for this kind of thing that you'll want to familiarize yourself with.</figcaption><img src=/images/execute.png alt="Execute script button"></figure></div></div></section><section><div class=grid-x><div class="cell large-10 large-offset-1"><p>One more thing, just to give MySQL a slightly more 'generic' dialect of our SQL language, please run the following:</p><pre class=slide-only><code class=language-sql>SET GLOBAL sql_mode='ANSI';</code></pre><textarea data-code-mirror=sql data-code-mirror-height=50 class=post-only>SET GLOBAL sql_mode='ANSI';</textarea><p>Vanilla MySQL has a few little quirks that we'll cover later on. The line of code above serves to "normalize" those quirks.</p><p>That's going to give us a real relational database to play with! But first, a little historical context :)</p></div></div></section><section class=slide-only><h2 class=h2>History, Terms & Definitions</h2></section><section id=history><div class=grid-x><div class="cell large-10 large-offset-1"><h2 class=h2>History</h2><figure><img src=/images/lovelace.png alt="Ada Lovelace"><figcaption>Ada Lovelace, the first computer programmer. Nerd alert!</figcaption></figure></div></div></section><section><div class=grid-x><div class="cell large-10 large-offset-1"><p>Relational databases have been around since 1970, and Oracle has been around (in one form or another) for 40 years.</p><p>IBM (DB2) and Microsoft (SQL Server) released their relational database systems in the mid-80s.</p><p>Since the technology world was a bit slower then, they were able to agree on standards (a.k.a. the SQL language).</p><p>In 1995, just as the world wide web was being born, along came the open-source MySQL, democratizing data for the whole world.</p><p>In 2008, Sun Microsystems bought MySQL, and, two years late, Oracle bought Sun Microsystems, because that's just how the world is now, I guess.</p></div></div></section><section id=terms><div class=grid-x><div class="cell large-10 large-offset-1 smaller-text"><h2 class=h2>Terminology</h2><p>Let's start learning some words!</p><figure><img src=/images/output--rows-columns.jpg alt="Demonstration of rows and columns"><figcaption>These are easy - rows are horizontal sets of data, and columns are vertical categories of data.</figcaption></figure></div></div></section><section><div class=grid-x><div class="cell large-10 large-offset-1 smaller-text"><h2 class=h2>Primary key</h2><p>Another important element that every table should have is a <strong>primary key</strong>.</p><figure><img src=/images/output--primary-key.jpg alt="Demonstration of a primary key"><figcaption>Primary keys are something you define when you create a table. They <em>must</em> be unique for each row! No two rows can have the same primary key.</figcaption></figure></div></div></section><section><div class=grid-x><div class="cell large-10 large-offset-1"><h2 class=h2>What makes a database 'relational'?</h2><p>This course will primarily deal with relational databases. There are other kinds, and we'll touch on them later in the course, but the relational database is one of the primary tools of the internet.</p><p>Relational databases have multiple tables that are related to one another. In addition to a <strong>primary key</strong>, tables will often have a <strong>foreign key</strong>. This is to establish a relationship between the data sets, and take our data from two dimensions to 3D!</p></div></div></section><section><div class=grid-x><div class="cell large-10 large-offset-1"><figure><img src=/images/output--foreign-key.jpg alt="Demonstration of a foreign key."><figcaption>If we look at our <code class=language-sql>INVOICES</code> table, you'll see that if references <code class=language-sql>VENDOR_ID</code>, which is the primary key for the <code class=language-sql>VENDOR</code> table. This means we can easily reference the information about the vendor that this invoice belongs to from the <code class=language-sql>VENDOR</code> table.</figcaption></figure></div></div></section><section id=relationships><div class=grid-x><div class="cell large-10 large-offset-1"><h2 class=h2>Types of relationships</h2><p>There are 3 types of relationship between tables, but only one of them is good!</p><p>A <strong>one-to-many</strong> relationship means that the primary key of one table is referenced multiple times in another table. That's good! If we only had a single table, that information would have to be repeated many times. Instead, we put it in one table once and reference it externally over and over. That's efficient.</p></div></div></section><section><div class=grid-x><div class="cell large-10 large-offset-1"><p>A <strong>one-to-one</strong> relationship means that any row in your table is only referenced one time by another table. If that's the case, it's more efficient to store all the data in a single table.</p></div></div></section><section><div class=grid-x><div class="cell large-10 large-offset-1"><p>A <strong>many-to-many</strong> relationship is <em>real</em> messy. Think of students and classes. Students have many classes and classes have many students. There are two reasons this is messy: 1) because we only want one piece of information per cell in our table, and 2) because only want one column per category of data. We can solve this by creating a 'joining table' that sits between them - a table that creates a one-to-many relationship with both tables.</p><p>Wow, that got a little complicated! Don't worry, we'll go back over all this. For today, just know that tables have relationships, and efficient relationships are best.</p></div></div></section><section id=def><div class=grid-x><div class="cell large-10 large-offset-1"><h2 class=h2>Types of Data</h2><p>There are certain ways that we keep our database organized and our data manageable. One is by defining a primary key. Your SQL client will throw an error if we try to add a row that has a primary key that's not unique.</p><p>Another is by defining what kind of data can go in each column.</p></div></div></section><section><div class=grid-x><div class="cell large-10 large-offset-1"><figure><img src=/images/column-info.jpg alt="Demonstration of clicking on a table to see information about it's columns."><figcaption>In DBeaver, if we click on a table in our table tree, it will show us information about the columns in that table, including what type of data is allowed.</figcaption></figure></div></div></section><section><div class=grid-x><div class="cell large-10 large-offset-1"><p>Some common data types:</p><ul><li>CHAR/VARCHAR2 - Strings of numbers, letters and symbols</li><li>NUMBER - Integers and decimal numbers</li><li>DATE - Dates and times</li></ul><p>Columns can also specify whether or not they allow <em>null</em> (unknown) values. Columns can also have default values. These are all things you define when you set up your table (like we did at the beginning of class).</p></div></div></section><section><div class=grid-x><div class="cell large-10 large-offset-1"><h2 class=h2>Types of Commands</h2></div></div></section><section id=ddlDml><div class=grid-x><div class="cell large-10 large-offset-1"><table class=stack><thead class=post-only><tr><td colspan=2>Categories of SQL Commands</td></tr><tr><td>Category</td><td>Examples</td></tr></thead><tbody><tr><td>Data Manipulation Language (DML Statements)</td><td><ul class=no-bullet><li><code class=language-sql>SELECT</code></li><li><code class=language-sql>INSERT</code></li><li><code class=language-sql>UPDATE</code></li><li><code class=language-sql>DELETE</code></li></ul></td></tr><tr><td>Data Definition Language (DDL Statements)</td><td><ul class=no-bullet><li><code class=language-sql>CREATE</code></li><li><code class=language-sql>TRUNCATE</code></li><li><code class=language-sql>ALTER</code></li><li><code class=language-sql>RENAME</code></li><li><code class=language-sql>DROP</code></li></ul></td></tr><tr><td>Data Control Language (DCL Statements)</td><td><ul class=no-bullet><li><code class=language-sql>GRANT</code></li><li><code class=language-sql>REVOKE</code></li></ul></td></tr><tr><td>Transaction Control Statements</td><td><ul class=no-bullet><li><code class=language-sql>COMMIT</code></li><li><code class=language-sql>ROLLBACK</code></li><li><code class=language-sql>SAVEPOINT</code></li></ul></td></tr></tbody></table></div></div></section><section id=query><div class=grid-x><div class="cell large-10 large-offset-1"><h2 class=h2>What is a query?</h2><p>As you might have guess from the name of the language, queries are pretty important to <abbr title="Structured Query Language">SQL</abbr>. Queries are <code class=language-sql>SELECT</code> statements. Queries return a <strong>results table</strong>. Queries can return results from a single table, or they can take advantage of the power of relational databases by using a <code class=language-sql>JOIN</code> clause in our query to get results that have combined data from multiple tables.</p></div></div></section><section><div class=grid-x><div class="cell large-10 large-offset-1"><p>There are different types of <code class=language-sql>JOIN</code>s that we can use - an <code class=language-sql>INNER JOIN</code> returns only data that can be related between the two tables by matching a cell (usually our PRIMARY and FOREIGN keys), whereas an <code class=language-sql>OUTER JOIN</code> will return data from both tables, without the need for a relationship.</p><p>There are more ways to specify how tables can be combined (<code class=language-sql>LEFT</code> and <code class=language-sql>RIGHT JOIN</code>s), but we're starting to get ahead of ourselves - for the first couple weeks, we're going to focus on getting data from a single table.</p></div></div></section><section><div class=grid-x><div class="cell large-10 large-offset-1"><h2 class=h2>Common query elements</h2></div></div></section><section class=slide-only><div class=grid-x><div class="cell large-10 large-offset-1"><h2 class=h2>SELECT</h2><p>Columns of data to include in the results table. The <code class=language-sql>*</code> character selects all columns. Can select multiple columns when the column names are comma-separated. Column names can be aliased with <code class=language-sql>AS</code> clause, concatenated with <code class=language-sql>||</code>, and/or formatted with literal strings inside single ASCII (straight, not curly) quotation marks. <code class=language-sql>SELECT</code> can use the <code class=language-sql>DISTINCT</code> keyword to eliminate duplicate rows from the results table.</p><pre><code class=language-sql>SELECT 
    vendor_name,
    vendor_city || ', ' || vendor_state AS city
FROM vendors</code></pre></div></div></section><section class=slide-only><div class=grid-x><div class="cell large-10 large-offset-1"><h2 class=h2>FROM</h2><p>The name of the table (or tables, when we start to use <code class=language-sql>JOIN</code>) that we're selecting data from.</p><pre><code class=language-sql>SELECT vendor_name
FROM vendors</code></pre></div></div></section><section class=slide-only><div class=grid-x><div class="cell large-10 large-offset-1 smaller-text"><h2 class=h2>WHERE</h2><p>Filters our results. This is where things get interesting, and we'll work on this a bunch next week. <code class=language-sql>WHERE</code> can use comparison operators (<code class=language-sql>=</code>, <code class=language-sql>></code>, <code class=language-sql><</code>, <code class=language-sql><=</code>, <code class=language-sql>>=</code>, <code class=language-sql><></code>), arithmetic operators (<code class=language-sql>+</code>, <code class=language-sql>-</code>, <code class=language-sql>*</code>, <code class=language-sql>/</code>), and/or logical operators (<code class=language-sql>AND</code>, <code class=language-sql>OR</code>, <code class=language-sql>NOT</code>) to compare to declared values (including dates) or values from other columns.</p></div></div></section><section><div class=grid-x><div class="cell large-10 large-offset-1"><p>Additionally, the <code class=language-sql>IN</code> operator can check a value against a list (either declared or generated by a subquery). This can be modified with <code class=language-sql>NOT</code> to exclude results that are included in the list. There are additional operators we can use with <code class=language-sql>WHERE</code>, including <code class=language-sql>BETWEEN</code>, <code class=language-sql>LIKE</code>, and <code class=language-sql>IS NULL</code> (and their negations), but that's a lot for one day!</p><pre><code class=language-sql>SELECT invoice_number, invoice_date, invoice_total 
FROM invoices
WHERE invoice_total > credit_total
OR invoice_total - payment_total - credit_total > 0
AND terms_id NOT IN (2, 5)</code></pre></div></div></section><section class=slide-only><div class=grid-x><div class="cell large-10 large-offset-1"><h2 class=h2>ORDER BY</h2><p>This orders our results by specified column(s). It can also reference aliases created in the <code class=language-sql>SELECT</code> statment, expressions or column positions.</p><p>Defaults to ascending order (lowest to highest), but order can be declared with the keywords <code class=language-sql>DESC</code> and <code class=language-sql>ASC</code>.</p><p>This can be applied to any column in the table, not just the ones being output in the results table. The exception to this is when using <code class=language-sql>SELECT</code> with the <code class=language-sql>DISTINCT</code> keyword.</p><pre><code class=language-sql>SELECT vendor_name
FROM vendors 
ORDER BY vendor_name DESC</code></pre></div></div></section><div class=grid-x><div class="cell large-12"><table class="unstriped stack code-examples fixed"><thead><tr><th>Code</th><th>Description</th><th>Example</th></tr></thead><tbody><tr><td><code class=language-sql>SELECT</code></td><td><strong>Chooses columns of data to include in the results table.</strong> The <code class=language-sql>*</code> character selects all columns. Can select multiple columns when the column names are comma-separated. Column names can be aliased with <code class=language-sql>AS</code> clause, concatenated with <code class=language-sql>||</code>, and/or formatted with literal strings inside single ASCII (straight, not curly) quotation marks. <code class=language-sql>SELECT</code> can use the <code class=language-sql>DISTINCT</code> keyword to eliminate duplicate rows from the results table.</td><td><textarea data-code-mirror=sql data-code-mirror-height=60>SELECT vendor_name, vendor_city || ', ' || 
vendor_state AS city FROM vendors</textarea></td></tr><tr><td><code class=language-sql>FROM</code></td><td><strong>The name of the table</strong> (or tables, when we start to use <code class=language-sql>JOIN</code>) <strong>that we're selecting data from</strong>.</td><td><textarea data-code-mirror=sql data-code-mirror-height=60>SELECT vendor_name
FROM vendors</textarea></td></tr><tr><td><code class=language-sql>WHERE</code></td><td><strong>Filters our results.</strong> This is where things get interesting, and we'll work on this a bunch next week. <code class=language-sql>WHERE</code> can use comparison operators (<code class=language-sql>=</code>, <code class=language-sql>></code>, <code class=language-sql><</code>, <code class=language-sql><=</code>, <code class=language-sql>>=</code>, <code class=language-sql><></code>), arithmetic operators (<code class=language-sql>+</code>, <code class=language-sql>-</code>, <code class=language-sql>*</code>, <code class=language-sql>/</code>), and/or logical operators (<code class=language-sql>AND</code>, <code class=language-sql>OR</code>, <code class=language-sql>NOT</code>) to compare to declared values (including dates) or values from other columns. Additionally, the <code class=language-sql>IN</code> operator can check a value against a list (either declared or generated by a subquery). This can be modified with <code class=language-sql>NOT</code> to exclude results that are included in the list. There are additional operators we can use with <code class=language-sql>WHERE</code>, including <code class=language-sql>BETWEEN</code>, <code class=language-sql>LIKE</code>, and <code class=language-sql>IS NULL</code> (and their negations), but that's a lot for one day!</td><td><textarea data-code-mirror=sql data-code-mirror-height=130>SELECT invoice_number, invoice_date, invoice_total 
FROM invoices
WHERE invoice_total > credit_total
OR invoice_total - payment_total - credit_total > 0
AND terms_id NOT IN (2, 5)</textarea></td></tr><tr><td><code class=language-sql>ORDER BY</code></td><td>This <strong>orders our results</strong> by specified column(s). It can also reference aliases created in the <code class=language-sql>SELECT</code> statment, expressions or column positions. Defaults to ascending order (lowest to highest), but order can be declared with the keywords <code class=language-sql>DESC</code> and <code class=language-sql>ASC</code> This can be applied to any column in the table, not just the ones being output in the results table. The exception to this is when using <code class=language-sql>SELECT</code> with the <code class=language-sql>DISTINCT</code> keyword.</td><td><textarea data-code-mirror=sql data-code-mirror-height=80>SELECT vendor_name
FROM vendors 
ORDER BY vendor_name DESC</textarea></td></tr></tbody></table></div></div><section><div class=grid-x><div class="cell large-10 large-offset-1"><h2 class=h2>There's more!</h2><p>But not today :) <code class=language-sql>FETCH</code>, <code class=language-sql>OFFSET</code>, et al. can wait.</p></div></div></section><section><div class=grid-x><div class="cell large-10 large-offset-1"><h2 class=h2>Reserved words</h2><p>What would happen if you named your column 'Select', 'Order By' and 'Distinct', and your table 'From'?</p><pre><code class=language-sql>SELECT 'Select', 'Distinct' 
FROM 'From' ORDER BY 'Order By'</code></pre><p>You <em>could</em> do it (as long as you quoted them in your query), but everyone would be mad at you.</p><p><strong>Reserved words</strong> are words that are used by the SQL syntax.</p><p>Here's a few to watch out for: <code>DATE</code>, <code>FILE</code>, <code>DEFAULT</code>, <code>GROUP</code>, <code>LEVEL</code>, <code>NUMBER</code>, <code>OPTION</code>, <code>RESOURCE</code>, <code>VALUES</code>.</p></div></div></section><section><div class=grid-x><div class="cell large-10 large-offset-1"><p>Don't worry about doing it by accident, though - your SQL client will throw an error if you try to create the column without quoting the reserved word properly.</p><p>See the full list in the <a href=https://dev.mysql.com/doc/refman/5.5/en/keywords.html#keywords-5-5-detailed-A target=_blank rel=noopener>MySQL Docs<span class=show-for-sr> Opens in a new window</span></a></p></div></div></section><section class=slide-only><h2 class=h2>Getting our hands dirty</h2></section><section id=formatting><div class=grid-x><div class="cell large-10 large-offset-1"><h2 class=h2>Formatting your code</h2><p>You should always code according to a formatting convention.</p><p>Different languages have different formatting conventions (sometimes due to restrictions in the language, sometimes to distinguish it from other languages).</p><p>Your workplace team may have conventions that supplement/supercede common conventions, but always default to common conventions.</p></div></div></section><section><div class=grid-x><div class="cell large-10 large-offset-1"><p>In SQL, we...</p><ul><li>capitalize our keywords,</li><li>have line breaks between statements (and longer clauses),</li><li>indent wrapped lines,</li><li>use underscores to separate words in our column names,</li><li>reference column names in lowercase,</li><li>use comments only when necessary (and keep them up-to-date).</li></ul></div></div></section><section id=lab><div class=grid-x><div class="cell large-10 large-offset-1"><h2 class=h2>Lab time!</h2><p>Labs are your time in-class to try out what we've learned, and make mistakes!</p><p>At the beginning of next class, you'll be quizzed on the same topics as are in your lab (although obviously not the exact questions).</p><p>If you're finished before the end of class, please see if anyone needs a hand!</p></div></div></section><section class=slide-only><div class=grid-x><div class="cell large-10 large-offset-1"><h2 class=h2>Lab Questions</h2><p>See <a href=/posts/the-1st-week/#lab target=_blank rel=noopener>notes<span class=show-for-sr> Opens in a new tab</span></a></p></div></div></section><section class=post-only><div class=grid-x><div class="cell large-10 large-offset-1"><h3>Lab Questions:</h3><ol class=lab-questions><li>Run the following query:
<textarea data-code-mirror=sql data-code-mirror-height=170>SELECT invoice_number, invoice_date, invoice_total
FROM invoices
WHERE invoice_date BETWEEN '2014-04-01' AND '2014-05-31'
AND invoice_total > 2000.00
ORDER BY invoice_date ASC, invoice_total ASC</textarea>
<strong>Describe, in your own words, what each element of this query is doing to produce the result table you see.</strong></li><li>Run the following query:
<textarea data-code-mirror=sql data-code-mirror-height=170>SELECT vendor_id, invoice_date, invoice_total
FROM invoices
WHERE invoice_date BETWEEN '2014-04-01' AND '2014-05-31'
AND invoice_total > 2000.00
ORDER BY invoice_date ASC, invoice_total ASC</textarea>
<strong>Describe, in your own words, what each element of this query is doing to produce the result table you see.</strong></li><li>Run the following query:
<textarea data-code-mirror=sql data-code-mirror-height=140>SELECT vendor_name, vendor_address1, vendor_city, vendor_state
FROM vendors
WHERE vendor_state IN ('MI', 'AZ', 'TX')
ORDER BY vendor_state DESC</textarea>
<strong>Describe, in your own words, what each element of this query is doing to produce the result table you see.</strong></li><li>Run the following query:
<textarea data-code-mirror=sql data-code-mirror-height=170>SELECT invoice_number, invoice_total, payment_total, invoice_total - payment_total AS "Balance Owing"
FROM invoices
WHERE invoice_total - payment_total <> 0
AND invoice_total >= 500
ORDER BY invoice_number</textarea>
<strong>Describe, in your own words, what each element of this query is doing to produce the result table you see.</strong></li><li>Write a query to display the <code class=language-sql>vendor_name</code>, <code class=language-sql>vendor_state</code>, and <code class=language-sql>vendor_city</code>. Create an alias for the three columns. Create an alias for <code class=language-sql>vendor_name</code> called <code class=language-sql>Vendor</code>, an alias for <code class=language-sql>vendor_state</code> called <code class=language-sql>state</code>, and an alias for <code class=language-sql>vendor_city</code> called <code class=language-sql>City</code>. Order the results of the output so it displays in ascending sequence by <code class=language-sql>vendor_city</code>.</li><li>Write a query that will display the <code class=language-sql>invoice_id</code>, and the <code class=language-sql>invoice_number</code>. Also include the <code class=language-sql>invoice_total</code> minus <code class=language-sql>payment_total</code> with an alias <code class=language-sql>balance</code>. Only show invoices that have an <code class=language-sql>invoice_date</code> between April 1, 2014 and April 30, 2014. Remember your date format for these values.</li><li>Write a query to show <code class=language-sql>vendor_id</code>, <code class=language-sql>vendor_name</code>, <code class=language-sql>vendor_contact_first_name</code>, <code class=language-sql>vendor_contact_last_name</code>, and <code class=language-sql>vendor_phone</code>. The columns <code class=language-sql>vendor_contact_first_name</code> and <code class=language-sql>vendor_contact_last_name</code> are to be shown in the output as one single column with an alias for this column called <code class=language-sql>Vendor Contact Name</code>. Sort the results by <code class=language-sql>vendor_contact_last_name</code>.</li></ol></div></div></section></div></div><script type=text/javascript src=/js/reveal.js></script><script>Reveal.initialize({dependencies:[{src:'/js/highlight.js',async:true,callback:function(){hljs.initHighlightingOnLoad();}},{src:'/js/reveal-a11y.js',async:true,condition:function(){return!!document.body.classList;}}]});</script></body></html>